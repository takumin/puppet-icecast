<!-- Managed Puppet -->

<icecast>
<% if @option['location'] -%>
	<location><%= @option['location'] %></location>
<% end -%>
<% if @option['admin'] -%>
	<admin><%= @option['admin'] %></admin>
<% end -%>
<% if @option['limits'] -%>
	<limits>
<%   if @option['limits']['clients'] -%>
		<clients><%= @option['limits']['clients'] %></clients>
<%   end -%>
<%   if @option['limits']['sources'] -%>
		<sources><%= @option['limits']['sources'] %></sources>
<%   end -%>
<%   if @option['limits']['queue-size'] -%>
		<queue-size><%= @option['limits']['queue-size'] %></queue-size>
<%   end -%>
<%   if @option['limits']['client-timeout'] -%>
		<client-timeout><%= @option['limits']['client-timeout'] %></client-timeout>
<%   end -%>
<%   if @option['limits']['header-timeout'] -%>
		<header-timeout><%= @option['limits']['header-timeout'] %></header-timeout>
<%   end -%>
<%   if @option['limits']['source-timeout'] -%>
		<source-timeout><%= @option['limits']['source-timeout'] %></source-timeout>
<%   end -%>
<%   if @option['limits']['burst-on-connect'] -%>
		<burst-on-connect><%= @option['limits']['burst-on-connect'] %></burst-on-connect>
<%   end -%>
<%   if @option['limits']['burst-size'] -%>
		<burst-size><%= @option['limits']['burst-size'] %></burst-size>
<%   end -%>
	</limits>
<% end -%>
<% if @option['authentication'] -%>
	<authentication>
<%   if @option['authentication']['source-password'] -%>
		<source-password><%= @option['authentication']['source-password'] %></source-password>
<%   end -%>
<%   if @option['authentication']['relay-password'] -%>
		<relay-password><%= @option['authentication']['relay-password'] %></relay-password>
<%   end -%>
<%   if @option['authentication']['admin-user'] -%>
		<admin-user><%= @option['authentication']['admin-user'] %></admin-user>
<%   end -%>
<%   if @option['authentication']['admin-password'] -%>
		<admin-password><%= @option['authentication']['admin-password'] %></admin-password>
<%   end -%>
	</authentication>
<% end -%>
<% if @option['shoutcast-mount'] -%>
	<shoutcast-mount><%= @option['shoutcast-mount'] %></shoutcast-mount>
<% end -%>
<% if @option['directory'] -%>
	<directory>
<%   if @option['directory']['yp-url-timeout'] -%>
		<yp-url-timeout><%= @option['directory']['yp-url-timeout'] %></yp-url-timeout>
<%   end -%>
<%   if @option['directory']['yp-url'] -%>
		<yp-url><%= @option['directory']['yp-url'] %></yp-url>
<%   end -%>
	</directory>
<% end -%>
<% if @option['hostname'] -%>
	<hostname><%= @option['hostname'] %></hostname>
<% end -%>
<% if @option['listen-socket'] -%>
<%   @option['listen-socket'].each do |val| -%>
	<listen-socket>
<%     if val['bind-address'] -%>
		<bind-address><%= val['bind-address'] %></bind-address>
<%     end -%>
<%     if val['port'] -%>
		<port><%= val['port'] %></port>
<%     end -%>
<%     if val['shoutcast-mount'] -%>
		<shoutcast-mount><%= val['shoutcast-mount'] %></shoutcast-mount>
<%     end -%>
<%     if val['ssl'] -%>
		<ssl><%= val['ssl'] %></ssl>
<%     end -%>
	</listen-socket>
<%   end -%>
<% end -%>
<% if @option['http-headers'] -%>
<%   @option['http-headers'].each do |val| -%>
	<http-headers>
<%     if val['name'] and val['value'] -%>
		<header name="<%= val['name'] %>" value="<%= val['value'] %>" />
<%     end -%>
	</http-headers>
<%   end -%>
<% end -%>
<% if @option['master-server'] -%>
	<master-server><%= @option['master-server'] %></master-server>
<% end -%>
<% if @option['master-server-port'] -%>
	<master-server-port><%= @option['master-server-port'] %></master-server-port>
<% end -%>
<% if @option['master-update-interval'] -%>
	<master-update-interval><%= @option['master-update-interval'] %></master-update-interval>
<% end -%>
<% if @option['master-password'] -%>
	<master-password><%= @option['master-password'] %></master-password>
<% end -%>
<% if @option['relays-on-demand'] -%>
	<relays-on-demand><%= @option['relays-on-demand'] %></relays-on-demand>
<% end -%>
<% # <relay> -%>
<% # <mount> -%>
<% if @option['fileserve'] -%>
	<fileserve><%= @option['fileserve'] %></fileserve>
<% end -%>
<% if @option['paths'] -%>
	<paths>
<%   if @option['paths']['basedir'] -%>
		<basedir><%= @option['paths']['basedir'] %></basedir>
<%   end -%>
<%   if @option['paths']['logdir'] -%>
		<logdir><%= @option['paths']['logdir'] %></logdir>
<%   end -%>
<%   if @option['paths']['webroot'] -%>
		<webroot><%= @option['paths']['webroot'] %></webroot>
<%   end -%>
<%   if @option['paths']['adminroot'] -%>
		<adminroot><%= @option['paths']['adminroot'] %></adminroot>
<%   end -%>
<%   if @option['paths']['pidfile'] -%>
		<pidfile><%= @option['paths']['pidfile'] %></pidfile>
<%   end -%>
<%   if @option['paths']['alias'] -%>
<%     @option['paths']['alias'].each do |val| -%>
<%       if val['source'] and val['destination'] -%>
		<alias source="<%= val['source'] %>" destination="<%= val['destination'] %>" />
<%       end -%>
<%     end -%>
<%   end -%>
<%   if @option['paths']['ssl-certificate'] -%>
		<ssl-certificate><%= @option['paths']['ssl-certificate'] %></ssl-certificate>
<%   end -%>
	</paths>
<% end -%>
<% if @option['logging'] -%>
	<logging>
<%   if @option['logging']['accesslog'] -%>
		<accesslog><%= @option['logging']['accesslog'] %></accesslog>
<%   end -%>
<%   if @option['logging']['errorlog'] -%>
		<errorlog><%= @option['logging']['errorlog'] %></errorlog>
<%   end -%>
<%   if @option['logging']['playlistlog'] -%>
		<playlistlog><%= @option['logging']['playlistlog'] %></playlistlog>
<%   end -%>
<%   if @option['logging']['loglevel'] -%>
		<loglevel><%= @option['logging']['loglevel'] %></loglevel>
<%   end -%>
<%   if @option['logging']['logsize'] -%>
		<logsize><%= @option['logging']['logsize'] %></logsize>
<%   end -%>
<%   if @option['logging']['logarchive'] -%>
		<logarchive><%= @option['logging']['logarchive'] %></logarchive>
<%   end -%>
	</logging>
<% end -%>
<% if @option['security'] -%>
	<security>
<%   if @option['security']['chroot'] -%>
		<chroot><%= @option['security']['chroot'] %></chroot>
<%   end -%>
<%   if @option['security']['changeowner'] -%>
		<changeowner>
<%     if @option['security']['changeowner']['user'] -%>
			<user><%= @option['security']['changeowner']['user'] %></user>
<%     end -%>
<%     if @option['security']['changeowner']['group'] -%>
			<group><%= @option['security']['changeowner']['group'] %></group>
<%     end -%>
		</changeowner>
<%   end -%>
	</security>
<% end -%>
</icecast>
